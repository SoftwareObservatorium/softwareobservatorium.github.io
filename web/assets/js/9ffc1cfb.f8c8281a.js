"use strict";(self.webpackChunklasso=self.webpackChunklasso||[]).push([[5551],{9844:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var a=s(4848),o=s(8453);const r={sidebar_position:3},t="Deploy LASSO in Embedded Mode",i={id:"installation/deploy",title:"Deploy LASSO in Embedded Mode",description:"The LASSO platform is a distributed platform by design, consisting of a manager node that executes LSL pipelines and worker nodes that execute actions on stimulus matrices (tests and code implementation candidates) in parallel. However, it can also be run in embedded mode on a single machine.",source:"@site/docs/installation/deploy.md",sourceDirName:"installation",slug:"/installation/deploy",permalink:"/docs/installation/deploy",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/installation/deploy.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Building LASSO from GitHub",permalink:"/docs/installation/build"},next:{title:"Setting Up an Executable Corpus",permalink:"/docs/installation/corpus"}},d={},l=[{value:"Options for Deployment",id:"options-for-deployment",level:2},{value:"Option 1: Docker Container",id:"option-1-docker-container",level:3},{value:"Option 2: Local Java",id:"option-2-local-java",level:3},{value:"Setup and Configuration",id:"setup-and-configuration",level:4},{value:"Arguments Explained",id:"arguments-explained",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"deploy-lasso-in-embedded-mode",children:"Deploy LASSO in Embedded Mode"}),"\n",(0,a.jsx)(n.p,{children:"The LASSO platform is a distributed platform by design, consisting of a manager node that executes LSL pipelines and worker nodes that execute actions on stimulus matrices (tests and code implementation candidates) in parallel. However, it can also be run in embedded mode on a single machine."}),"\n",(0,a.jsx)(n.h2,{id:"options-for-deployment",children:"Options for Deployment"}),"\n",(0,a.jsx)(n.h3,{id:"option-1-docker-container",children:"Option 1: Docker Container"}),"\n",(0,a.jsx)(n.p,{children:"Running LASSO's service in a Docker container is the simplest way to set up the platform."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["See detailed instructions for ",(0,a.jsx)(n.a,{href:"../infrastructure/docker",children:"Docker"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["The ",(0,a.jsx)(n.em,{children:"Dockerfile"})," is located in ",(0,a.jsx)(n.a,{href:"https://github.com/SoftwareObservatorium/lasso/tree/develop/docker/service_embedded",children:"Dockerfile"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Note that example configuration files (JSON) for this guide of the corpus and the users are located in ",(0,a.jsx)(n.a,{href:"https://github.com/SoftwareObservatorium/lasso/tree/develop/doc/lasso_config",children:"lasso_config"}),". You may need to adjust the Dockerfile mentioned above."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"option-2-local-java",children:"Option 2: Local Java"}),"\n",(0,a.jsx)(n.p,{children:"LASSO's platform can also be run as a classic local Java application (Spring Boot jar)."}),"\n",(0,a.jsx)(n.h4,{id:"setup-and-configuration",children:"Setup and Configuration"}),"\n",(0,a.jsx)(n.p,{children:"To deploy LASSO in embedded mode using Java, follow these steps:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Create LASSO work directory"}),": Run the following command to create the necessary directories:"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mkdir lasso_work\nmkdir lasso_config\ncp lasso_config/users.json lasso_config/\ncp lasso_config/corpus.json lasso_config/\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Note that example configuration files (JSON) for this guide of the corpus and the users are located in ",(0,a.jsx)(n.a,{href:"https://github.com/SoftwareObservatorium/lasso/tree/develop/doc/lasso_config",children:"lasso_config"}),". You may need to adjust the Dockerfile mentioned above."]}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Copy over arena jar"})," (LASSO's scalable test driver for Java): Copy the required JAR file into the ",(0,a.jsx)(n.code,{children:"lasso_work"})," directory:"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cp arena/target/arena-1.0.0-SNAPSHOT-exec.jar lasso_work/repository/support/arena-1.0.0-SNAPSHOT.jar\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Running LASSO in Embedded Mode"})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["To run LASSO in embedded mode, execute the following command (note that ",(0,a.jsx)(n.strong,{children:"add-opens"})," is required in more recent versions of Java):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'java --add-opens=java.base/jdk.internal.access=ALL-UNNAMED \\\n     --add-opens=java.base/jdk.internal.misc=ALL-UNNAMED \\\n     --add-opens=java.base/sun.nio.ch=ALL-UNNAMED \\\n     --add-opens=java.base/sun.util.calendar=ALL-UNNAMED \\\n     --add-opens=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED  \\\n     --add-opens=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED  \\\n     --add-opens=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED  \\\n     --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED  \\\n     --add-opens=java.base/java.io=ALL-UNNAMED  \\\n     --add-opens=java.base/java.nio=ALL-UNNAMED  \\\n     --add-opens=java.base/java.net=ALL-UNNAMED  \\\n     --add-opens=java.base/java.util=ALL-UNNAMED  \\\n     --add-opens=java.base/java.util.concurrent=ALL-UNNAMED  \\\n     --add-opens=java.base/java.util.concurrent.locks=ALL-UNNAMED  \\\n     --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED  \\\n     --add-opens=java.base/java.lang=ALL-UNNAMED  \\\n     --add-opens=java.base/java.lang.invoke=ALL-UNNAMED  \\\n     --add-opens=java.base/java.math=ALL-UNNAMED  \\\n     --add-opens=java.sql/java.sql=ALL-UNNAMED  \\\n     --add-opens=java.base/java.lang.reflect=ALL-UNNAMED  \\\n     --add-opens=java.base/java.time=ALL-UNNAMED  \\\n     --add-opens=java.base/java.text=ALL-UNNAMED  \\\n     --add-opens=java.management/sun.management=ALL-UNNAMED  \\\n     --add-opens java.desktop/java.awt.font=ALL-UNNAMED \\\n    -server -ea -Xms2G -Xmx4G \\\n    -Dserver.port=10222 -Djava.net.preferIPv4Stack=true -Dcluster.nodeId=lasso-quickstart -Dcluster.embedded=true \\\n    -Dthirdparty.docker.uid=$(id -u) -Dthirdparty.docker.gid=$(id -g) \\\n     -Dlasso.workspace.root="$PWD/lasso_work/"\\\n     -Dusers="file:$PWD/lasso_config/users.json"\\\n     -Dcorpus="file:$PWD/lasso_config/corpus.json"\\\n     -jar /opt/lasso/service-1.0.0-SNAPSHOT.jar\n'})}),"\n",(0,a.jsx)(n.h3,{id:"arguments-explained",children:"Arguments Explained"}),"\n",(0,a.jsx)(n.p,{children:"Here is a quick description of the arguments used to run LASSO in embedded mode:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Memory allocation"}),": ",(0,a.jsx)(n.code,{children:"server"}),", ",(0,a.jsx)(n.code,{children:"-ea"}),", ",(0,a.jsx)(n.code,{children:"-Xms2G"}),", and ",(0,a.jsx)(n.code,{children:"-Xmx4G"})," allocate sufficient memory for LASSO's Ignite cluster."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Ignite configuration"}),": ",(0,a.jsx)(n.code,{children:"-Dserver.port=10222"}),", ",(0,a.jsx)(n.code,{children:"-Djava.net.preferIPv4Stack=true"}),", ",(0,a.jsx)(n.code,{children:"-Dcluster.nodeId=lasso-quickstart"}),", and ",(0,a.jsx)(n.code,{children:"-Dcluster.embedded=true"})," configure the Ignite cluster to run in embedded mode."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"User/group IDs"}),": ",(0,a.jsx)(n.code,{children:"-Dthirdparty.docker.uid=$(id -u)"})," and ",(0,a.jsx)(n.code,{children:"-Dthirdparty.docker.gid=$(id -g)"})," set the user and group IDs for Docker images (based on the machine's command results)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Working directory"}),": ",(0,a.jsx)(n.code,{children:'-Dlasso.workspace.root="$PWD/lasso_work/"'})," sets the working directory for LASSO executions/traces."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"User configuration"}),": ",(0,a.jsx)(n.code,{children:'-Dusers="file:$PWD/lasso_config/users.json"'})," sets the users required to access the webapps and RESTful API."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Corpus configuration"}),": ",(0,a.jsx)(n.code,{children:'-Dcorpus="file:$PWD/lasso_config/corpus.json"'})," sets the corpus configuration."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>i});var a=s(6540);const o={},r=a.createContext(o);function t(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);