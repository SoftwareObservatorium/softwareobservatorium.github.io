"use strict";(self.webpackChunklasso=self.webpackChunklasso||[]).push([[8600],{8261:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var r=n(4848),t=n(8453);const o={},i="Code Index with Solr",a={id:"infrastructure/solr",title:"Code Index with Solr",description:"This guide provides a step-by-step walkthrough on setting up a new code search index as part of LASSO's executable corpus.",source:"@site/docs/infrastructure/solr.md",sourceDirName:"infrastructure",slug:"/infrastructure/solr",permalink:"/web/docs/infrastructure/solr",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/infrastructure/solr.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Nexus and LASSO: A Step-by-Step Guide",permalink:"/web/docs/infrastructure/nexus"},next:{title:"Advanced",permalink:"/web/docs/category/advanced"}},l={},c=[{value:"Quickstart Guide (Docker)",id:"quickstart-guide-docker",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Step-by-Step Instructions",id:"step-by-step-instructions",level:3},{value:"Update the schema of your newly created index (Optional)",id:"update-the-schema-of-your-newly-created-index-optional",level:3},{value:"Schema Files",id:"schema-files",level:3}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"code-index-with-solr",children:"Code Index with Solr"}),"\n",(0,r.jsx)(s.p,{children:"This guide provides a step-by-step walkthrough on setting up a new code search index as part of LASSO's executable corpus."}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Important:"})," Possible security risks are not taken into consideration, so do not expose your instances without proper configuration and security measures."]}),"\n",(0,r.jsx)(s.h2,{id:"quickstart-guide-docker",children:"Quickstart Guide (Docker)"}),"\n",(0,r.jsx)(s.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(s.p,{children:"This guide assumes that:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["A working Docker installation is present on the local machine. For more information, see ",(0,r.jsx)(s.a,{href:"docker",children:"docker"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["The official Solr image from Docker Hub (see ",(0,r.jsx)(s.a,{href:"https://hub.docker.com/_/solr",children:"https://hub.docker.com/_/solr"}),") is used to run the latest version of Solr."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"step-by-step-instructions",children:"Step-by-Step Instructions"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Create a directory for Solr index"}),":"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"mkdir lassoindex\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Set ownership and permissions for Solr user"}),":"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo chown -R 8983:8983 lassoindex\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Run a new Solr container with a custom index"}),":"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'docker run -d -v "$PWD/lassoindex:/var/solr" -p 8983:8983 --name lasso_solr_quickstart solr solr-precreate lasso_quickstart\n'})}),"\n",(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Verify the container is running"}),":"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"docker ps -a\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Alternatively, open your web browser and load Solr's dashboard at ",(0,r.jsx)(s.a,{href:"http://localhost:8983/",children:"http://localhost:8983/"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"update-the-schema-of-your-newly-created-index-optional",children:"Update the schema of your newly created index (Optional)"}),"\n",(0,r.jsxs)(s.p,{children:["This step assumes that your Solr instance is running on ",(0,r.jsx)(s.code,{children:"localhost"})," on port ",(0,r.jsx)(s.code,{children:"8983"}),"."]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Set the path to LASSO's repository"}),":"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"export LASSO_REPO=/my/path/lasso/repository\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Copy LASSO document schema to your index"}),":"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo cp $LASSO_REPO/doc/solr_config/managed-schema* lassoindex/data/lasso_quickstart/conf/\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Set ownership and permissions for Solr user (again)"}),":"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo chown -R 8983:8983 lassoindex/data/lasso_quickstart/conf/\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reload the index to load the new schema"}),":"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'curl -vvv "http://localhost:8983/solr/admin/cores?action=RELOAD&core=lasso_quickstart"\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Alternatively, open your web browser and load Solr's dashboard to reload the index using 'Core Admin' at ",(0,r.jsx)(s.a,{href:"http://localhost:8983/",children:"http://localhost:8983/"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"schema-files",children:"Schema Files"}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.p,{children:["The schema files are located in ",(0,r.jsx)(s.a,{href:"https://github.com/SoftwareObservatorium/lasso/tree/develop/doc/solr_config",children:"solr_config"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Note:"})," This guide was tested under Ubuntu 24.04 LTS."]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>a});var r=n(6540);const t={},o=r.createContext(t);function i(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);