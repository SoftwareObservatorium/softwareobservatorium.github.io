"use strict";(self.webpackChunklasso=self.webpackChunklasso||[]).push([[8300],{9466:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var o=t(4848),n=t(8453);const r={},i="Nexus and LASSO: A Step-by-Step Guide",a={id:"infrastructure/nexus",title:"Nexus and LASSO: A Step-by-Step Guide",description:"This guide walks you through the process of setting up a new artifact repository in Nexus as part of LASSO's executable corpus. Please note that security risks are not considered, so do not expose your instances.",source:"@site/docs/infrastructure/nexus.md",sourceDirName:"infrastructure",slug:"/infrastructure/nexus",permalink:"/docs/infrastructure/nexus",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/infrastructure/nexus.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Docker",permalink:"/docs/infrastructure/docker"},next:{title:"Code Index with Solr",permalink:"/docs/infrastructure/solr"}},l={},c=[{value:"Quickstart Guide (Docker)",id:"quickstart-guide-docker",level:2},{value:"Start Nexus in a Container",id:"start-nexus-in-a-container",level:3},{value:"Get Password for User &#39;admin&#39;",id:"get-password-for-user-admin",level:3},{value:"Nexus Configuration",id:"nexus-configuration",level:2},{value:"Open Your Web Browser and Login",id:"open-your-web-browser-and-login",level:3},{value:"Deployment of Subject Artifacts within LASSO",id:"deployment-of-subject-artifacts-within-lasso",level:2},{value:"Step-by-Step Instructions:",id:"step-by-step-instructions",level:3},{value:"Update LASSO&#39;s Configuration File <code>corpus.json</code>",id:"update-lassos-configuration-file-corpusjson",level:3},{value:"Restart LASSO",id:"restart-lasso",level:3},{value:"Deployment of LASSO&#39;s Support Libraries",id:"deployment-of-lassos-support-libraries",level:2}];function d(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.h1,{id:"nexus-and-lasso-a-step-by-step-guide",children:"Nexus and LASSO: A Step-by-Step Guide"}),"\n",(0,o.jsx)(s.p,{children:"This guide walks you through the process of setting up a new artifact repository in Nexus as part of LASSO's executable corpus. Please note that security risks are not considered, so do not expose your instances."}),"\n",(0,o.jsx)(s.h2,{id:"quickstart-guide-docker",children:"Quickstart Guide (Docker)"}),"\n",(0,o.jsxs)(s.p,{children:["This guide assumes you have a working Docker installation on your local machine. You can refer to the official Docker documentation for instructions: (",(0,o.jsx)(s.a,{href:"https://docs.docker.com/engine/install/linux-postinstall/",children:"https://docs.docker.com/engine/install/linux-postinstall/"}),")"]}),"\n",(0,o.jsx)(s.p,{children:"We will use the official Sonatype Nexus OSS image for this guide. Please note that security risks are not considered, so do not expose your instances."}),"\n",(0,o.jsx)(s.h3,{id:"start-nexus-in-a-container",children:"Start Nexus in a Container"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"# start nexus in a container\ndocker run -d -p 8081:8081 --name nexus sonatype/nexus3\n# NOTE: be patient (!), nexus takes some time to start\n"})}),"\n",(0,o.jsx)(s.h3,{id:"get-password-for-user-admin",children:"Get Password for User 'admin'"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"# get password for user 'admin'\ndocker exec -it nexus bash\ncat sonatype-work/nexus3/admin.password\n# terminate bash - ctrl-d\n"})}),"\n",(0,o.jsx)(s.p,{children:"Tested with Sonatype Nexus OSS 3.65.0-02."}),"\n",(0,o.jsx)(s.h2,{id:"nexus-configuration",children:"Nexus Configuration"}),"\n",(0,o.jsx)(s.h3,{id:"open-your-web-browser-and-login",children:"Open Your Web Browser and Login"}),"\n",(0,o.jsxs)(s.p,{children:["Open your web browser and navigate to ",(0,o.jsx)(s.code,{children:"http://localhost:8081/"}),". Log in as 'admin' using the aforementioned password. After a successful login, Nexus will start a quick wizard. Make sure to enable anonymous access."]}),"\n",(0,o.jsx)(s.h2,{id:"deployment-of-subject-artifacts-within-lasso",children:"Deployment of Subject Artifacts within LASSO"}),"\n",(0,o.jsxs)(s.p,{children:["Actions like ",(0,o.jsx)(s.code,{children:"GenerateCodeOllama"})," assume a (Nexus) artifact repository to be present for deployment of artifacts under analysis (on-the-fly). This requires the presence of a repository in which artifacts can be deployed."]}),"\n",(0,o.jsx)(s.h3,{id:"step-by-step-instructions",children:"Step-by-Step Instructions:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["Log in to your Nexus Repository manager using your admin account (e.g., ",(0,o.jsx)(s.a,{href:"http://localhost:8081/",children:"http://localhost:8081/"}),")"]}),"\n",(0,o.jsxs)(s.li,{children:["Go to ",(0,o.jsx)(s.code,{children:"http://localhost:8081/#admin/repository/repositories"})]}),"\n",(0,o.jsxs)(s.li,{children:["Click ",(0,o.jsx)(s.code,{children:"Create repository"})]}),"\n",(0,o.jsxs)(s.li,{children:["Choose repository type ",(0,o.jsx)(s.code,{children:"maven2 (hosted)"})]}),"\n",(0,o.jsxs)(s.li,{children:["Assign a unique identifier (e.g., ",(0,o.jsx)(s.code,{children:"lasso-deploy"}),")"]}),"\n",(0,o.jsxs)(s.li,{children:["Set version policy to ",(0,o.jsx)(s.code,{children:"mixed"}),", layout policy to ",(0,o.jsx)(s.code,{children:"permissive"}),", and deployment policy to ",(0,o.jsx)(s.code,{children:"allow redeploy"})]}),"\n",(0,o.jsxs)(s.li,{children:["Go to ",(0,o.jsx)(s.code,{children:"http://localhost:8081/#admin/repository/repositories:maven-public"})," and add your newly created repository to ",(0,o.jsx)(s.em,{children:"Members"}),", so we can retrieve deployed artifacts via the ",(0,o.jsx)(s.em,{children:"maven-public"})," repository"]}),"\n"]}),"\n",(0,o.jsxs)(s.h3,{id:"update-lassos-configuration-file-corpusjson",children:["Update LASSO's Configuration File ",(0,o.jsx)(s.code,{children:"corpus.json"})]}),"\n",(0,o.jsxs)(s.p,{children:["You need to update LASSO's configuration file ",(0,o.jsx)(s.a,{href:"https://github.com/SoftwareObservatorium/lasso/tree/develop/doc/lasso_config",children:"corpus.json"})," with your Nexus deployment settings. Please note that you need to restart LASSO after updating the configuration file."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-json",children:'  "artifactRepository": {\n    "id": "lasso_quickstart_nexus",\n    "name": "Quickstart nexus",\n    "url": "http://localhost:8081/repository/maven-public/",\n    "deploymentUrl": "http://localhost:8081/repository/lasso-deploy/",\n    "user": "XXX",\n    "pass": "XXX",\n    "description": "quickstart repository of LASSO"\n  }\n'})}),"\n",(0,o.jsx)(s.h3,{id:"restart-lasso",children:"Restart LASSO"}),"\n",(0,o.jsxs)(s.p,{children:["You need to restart LASSO with the updated ",(0,o.jsx)(s.code,{children:"corpus.json"})," configuration file. It might be necessary to update LASSO's Maven configuration in ",(0,o.jsx)(s.code,{children:"lasso-work/repository/settings.xml"})," as well (alternatively, change or removing LASSO's existing work directory)."]}),"\n",(0,o.jsxs)(s.p,{children:["Note: For advanced use cases with LASSO, setting up a deployment ",(0,o.jsx)(s.em,{children:"user"})," is a better choice instead of using the admin user."]}),"\n",(0,o.jsx)(s.h2,{id:"deployment-of-lassos-support-libraries",children:"Deployment of LASSO's Support Libraries"}),"\n",(0,o.jsx)(s.p,{children:"Certain features of LASSO rely on deployed support libraries. To deploy them (see configuration above), run the following command to deploy all LASSO related artifacts to your local Nexus repository"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"# set your path to LASSO's repository\n./mvnw -s doc/nexus_config/settings_plugin_deploy.xml -gs doc/nexus_config/settings_plugin_deploy.xml -DskipTests -Dfrontend.build=embedded -DaltDeploymentRepository=lasso_quickstart_nexus::default::http://localhost:8081/repository/lasso-deploy/ -DaltReleaseDeploymentRepository=lasso_quickstart_nexus::default::http://localhost:8081/repository/lasso-deploy/ -DaltSnapshotDeploymentRepository=lasso_quickstart_nexus::default::http://localhost:8081/repository/lasso-deploy/ deploy\n"})}),"\n",(0,o.jsxs)(s.p,{children:["Note: You need to change the password in ",(0,o.jsx)(s.code,{children:"doc/nexus_config/settings_plugin_deploy.xml"})," to your custom Nexus password (see example)."]})]})}function u(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>a});var o=t(6540);const n={},r=o.createContext(n);function i(e){const s=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),o.createElement(r.Provider,{value:s},e.children)}}}]);